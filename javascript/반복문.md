# While과 for 반복문

반복문(loop)을 사용하면 동일한 코드를 여러번 반복할 수 있다.

## 'while' 반복문

```javascript
while (condition) {
  // 코드
  // '반복문 본문(body)'이라 불림
}
```

`condition`(조건)이 truthy이면 반복문 본문의 `코드`가 실행된다.

예시

```javascript
let i = 0;
while (i < 3) {
  alert(i);
  i++;
} // 0, 1, 2가 출력됨
```

반복문 본문이 한 번 실행되는 것을 **반복(iteration)**이라고 한다. 위 예시에선 반복문이 3번의 이터레이션을 만든다.

반복문 조건엔 비교뿐만 아니라 _모든 종류의 표현식, 변수_ 가 올 수 있다. 조건은 `while`에 의해 평가되고, 평가 후에 불린값으로 변경된다.

```javascript
let i = 2;
while (i) {
  alert(i);
  i--;
} // 위의 첫 번째 예시와 반대 순서로 2, 1, 0이 출력

// 반복문 본문이 한 줄이면 대괄호를 생략할 수 있다.
while (i) alert(i--);
// i-- 전의 i가 출력됨
```

## 'do...while' 반복문

`do...while`문법을 사용하면 `condition`을 반복문 본문 아래로 옮길 수 있다.

```javascript
do {
  // 반복문 본문
} while (condition);
```

`while`과 다른 점은 _본문이 먼저 실행_ 되고, 조건을 확인한 후 조건이 truthy인 동안에 본문이 계속 실행된다는 점이다.

예시

```javascript
let i = 0;
do {
  alert(i);
  i++;
} while (i < 3);
```

`do...while`문법은 조건이 truthy인지 아닌지에 상관없이, 본문을 최소한 한 번이라도 실행하고 싶을 때만 사용한다. 대다수의 상황에선 `while`반복문이 더 적합하다.

## 'for' 반복문

`for`반복문은 `while`반복문보다 복잡하지만 가장 많이 쓰이는 반복문이다.

```javascript
for (begin; condition; step) {
  // ... 반복문 본문 ...
}
```

#### 구성 요소

| 구성 요소 | 코드 예제 | 설명                                                      |
| --------- | --------- | --------------------------------------------------------- |
| begin     | i = 0     | 반복문에 진입할 때 단 한 번 실행된다.                     |
| condition | i < 3     | 반복마다 해당 조건이 확인된다. false이면 반복문을 멈춘다. |
| body      | alert(i)  | condition이 truthy일 동안 게속 실행된다.                  |
| step      | i++       | 각 반복의 body가 실행된 이후에 실행된다.                  |

1. `begin`을 실행함
2. `condition`이 truthy이면 -> `body`를 실행 -> `step`을 실행
3. `condition`이 falsy일 때까지 2를 반복...

예시

```javascript
for (let i = 0; i < 3; i++) {
  alert(i);
} // 0, 1, 2가 출력된다.
```

위의 예시에서 일어나는 과정을 풀어보면 아래와 같다.

```javascript
// begin 실행
let i = 0;
// condition이 truthy이면 -> body를 실행 -> step을 실행
if (i < 3) {
  alert(i);
  i++;
} // 0
// condition이 truthy이면 -> body를 실행 -> step을 실행
if (i < 3) {
  alert(i);
  i++;
} // 1
// condition이 truthy이면 -> body를 실행 -> step을 실행
if (i < 3) {
  alert(i);
  i++;
} // 2
// i == 3이므로 반복문 종료
```

> ---
>
> ❕ 인라인 변수 선언
> 지금까지는 '카운터 변수' `i`를 반복문 안에서 선언하였다. 이런 방식을 **인라인 변수 선언**이라고 한다. 이렇게 선언한 변수는 반복문 안에서만 접근할 수 있다.
>
> 인라인 변수 선언 대신, 정이되어있는 변수를 사용할 수도 있다.
>
> ```javascript
> let i = 0;
>
> for (i = 0; i < 3; i++) {
>   // 기존에 정의된 변수 사용
>   alert(i); // 0, 1, 2
> }
>
> alert(i); // 3, 반복문 밖에서 선언한 변수이므로 사용할 수 있음
> ```
>
> ---

### 구성 요소 생략하기

`for`문의 구성 요소를 생략하는 것도 가능하다.

반복문이 시작될 때 아무것도 할 필요가 없으면 `begin` 생략 가능

```javascript
let i = 0;

for (; i < 3; i++) {
  alert(i);
}
```

`step` 또한 생략 가능

```javascript
let i = 0;

for (; i < 3; ) {
  alert(i++);
}
```

위와 같은 반복문은 `while (i < 3)`과 동일해진다.

모든 구성요소를 생략할 수도 있는데, 이렇게 되면 무한 반복문이 만들어진다.

```javascript
for (;;) {
  // 끊임 없이 본문이 실행됩니다.
}
```

> ---
>
> ⚠️ 주의
> `for`문의 구성 요소를 생략하더라도 두 개의 `:` 세미콜론은 꼭 넣어주어야 한다. 하나라도 없으면 문법 에러가 발생한다.
>
> ---

## 반복문 빠져나오기 break

일반적으로 반복문의 조건이 falsy가 되면 반복문이 종료된다.
그런데 특별한 지시자인 `break`를 사용하면 언제든 원하는 때에 반복문을 빠져나올 수 있다.

아래 예시의 반복문은 사용자에게 일련의 숫자를 입력하도록 하고, 사용자가 아무런 값도 입력하지 않으면 반복문을 종료한다.

```javascript
let sum = 0;

while (true) {
  let value = +prompt("숫자를 입력하세요", ""); // +: 입력값을 숫자로 변환

  if (!value) break; // (*)

  sum += value;
}
alert("합계: " + sum);
```

`(*)`로 표시한 줄에 있는 `break`는 사용자가 아무것도 입력하지 않거나 `Cancel` 버튼을 눌렀을 때 활성화된다. 이때 반복문이 즉시 중단되고 제어 흐름이 반복문 아래 첫 번째 줄로 이동한다.

> 반복문의 시작 지점이나 끝 지점에서 조건을 확인하는 것이 아니라
> 본문 가운데 혹은 본문 여러 곳에서 조건을 확인해야 하는 경우, '무한 반복문' + '`break`' 조합을 사용하면 좋다.

## 다음 반복으로 넘어가기 continue

`continue` 지시자는 `break`의 '가벼운 버전'이다.
`continue`는 전체 반복문을 멈추지 않고, 현재 실행중인 이터레이션을 멈추고 반복문이 다음 이터레이션을 강제로 실행시키도록 한다.(조건을 통과)

`continue`는 현재 반복을 종료시키고 다음 반복으로 넘어가고 싶을 때 사용할 수 있다.

아래 반복문은 `continue`를 사용해 홀수만 출력한다.

```javascript
for (let i = 0; i < 10; i++) {
  // 조건이 참이라면 남아있는 본문은 실행되지 않는다.
  if (i % 2 == 0) continue;

  alert(i); // 1, 3, 5, 7, 9가 차례로 출력됨
}
```

> ---
>
> ❕ 참고
> `continue`는 중첩을 줄이는 데 도움을 준다.
>
> 홀수를 출력해주는 예시는 아래처럼 바꿀 수도 있다.
>
> ```javascript
> for (let i = 0; i < 10; i++) {
>   if (i % 2) {
>     alert(i);
>   }
> }
> ```
>
> 위와 같이 코드를 작성하면 부작용으로 중첩 레벨(대괄호 안의 `alert` 호출)이 하나 더 늘어난다. 또한 `if` 안의 코드가 길어지면 전체 가독성이 떨어질 수 있다.
>
> ---

> ---
>
> ⚠️ 주의
> `?` 오른쪽엔 `break`나 `continue`가 올 수 없다.
>
> 표현식이 아닌 문법 구조(syntax construct)는 삼항 연산자 `?`에 사용할 수 없다. 특히 `break`나 `continue`와 같은 지시자는 삼항 연산자에 사용하면 안된다.
>
> 아래와 같은 조건문이 있다고 하자
>
> ```javascript
> if(i > 5) {
> 	alert(i);
> } else {
> 	continue;
> }
> ```
>
> 물음표를 사용해서 위 조건문을 아래와 같이 바꾸려고 하면:
>
> ```javascript
> (i > 5) > alert(i) : continue; // 여기에 continue 사용 불가
> ```
>
> 위와 같은 코드는 문법 에러를 발생시킨다. 이는 물음표 연산자 `?`를 `if`문 대용으로 쓰지 말아야 하는 이유 중 하나이다.
>
> ---

## break/continue와 레이블

여러개의 중첩 반복문을 한 번에 빠져나와야 하는 경우가 있다.

아래의 예시는 `i`와 `j`를 반복하면서 프롬프트 창에 `(0, 0)`부터 `(2, 2)`까지를 구성하는 좌표 `(i, j)`를 입력하게 해 주는 예시이다.

```javascript
for (let i = 0; i < 3; i++) {
  for (let j = 0; j < 3; j++) {
    let input = prompt(`(${i}, ${j})의 값`, "");
    // 여기서 멈춰서 아래쪽의 `완료!`가 출력되게 하고 싶다..
  }
}
alert("완료!");
```

사용자가 `Cancel` 버튼을 눌렀을 때 반복문을 중단시킬 방법이 필요하다.

`input` 아래에 `break` 지시자를 사용하면 안쪽에 있는 반복문만(`j`) 빠져나올 수 있다. 우리가 원하는 것은 한 번에 두 반복문을 빠져나오는 것이다.
이럴 때 레이블을 사용할 수 있다.

**레이블(label)** 은 반복문 앞에 콜론과 함께 쓰이는 식별자이다.

```javascript

labelName: for (...) {
	...
}
```

반복문 안에서 `break <labelName>`문을 사용하면 레이블에 해당하는 반복문을 빠져나올 수 있다.

```javascript

outer: for (let i = 0; i < 3; i++) {

	for (let j = 0; j < 3; j++) {
		let input = prompt(`(${i}, ${j})의 값`, '');

		// 사용자가 아무것도 입력하지 않거나, Cancel 버튼을 누르면 두 반복문 모두를 빠져나온다.
		if (!input) break outer; // (*)

		... // 입력받은 값을 가지고 무언가를 함
	}

}
alert('완료!');

```

`break outer`는 `outer`라는 레이블이 붙은 반복문을 찾고, 해당 반복문을 빠져나오게 해준다. 따라서 제어 흐름이 `(*)`에서 `alert('완료!')`로 바로 바뀐다.

레이블을 별도의 줄에 써주는 것도 가능하다.

```javascript

outer:
for (let i = 0; i < 3; i++) { ... }

```

`continue` 지시자를 레이블과 함께 사용하는 것도 가능하다. 두 가지를 함께 사용하면 레이블이 붙은 반복문의 다음 이터레이션이 실행된다.

> ---
>
> ⚠️ 주의
> 레이블은 마음대로 '점프'할 수 있게 해주지 않는다.
>
> 레이블을 사용한다고 해서 원하는 곳으로 마음대로 점프할 수 있는 것은 아니다.
> 아래 예시처럼 사용하는 것은 불가능하다.
>
> ```javascript
> break label; // 아래 for문으로 점프할 수 없다.
>
> label: for (...)
> ```
>
> `break`와 `continue`는 반복문 안에서만 사용할 수 있고, 레이블은 반드시 `break`나 `continue` 지시자 위에 있어야 한다.
>
> ---

## 과제

1. 아래 코드를 실행했을 때 얼럿 창에 마지막으로 뜨는 값은 무엇일까요? 이유도 함께 설명해보세요.

```javascript
let i = 3;

while (i) {
  alert(i--);
}
```

답: 1
반복이 하나 끝날 때마다 `i`는 `1`씩 줄어든다. `while(i)`은 `i=0`일 때 멈춘다.

```javascript
let i = 3;
alert(i--); // 3이 출력되고 i는 2로 줄어듭니다.
alert(i--); // 2가 출력되고 i는 1로 줄어듭니다.
alert(i--); // 1이 출력되고 i는 0으로 줄어듭니다.

// i가 0이 되었기 때문에 while(i)는 종료됩니다.
```

---

2. while 반복문이 순차적으로 실행될 때마다 얼럿 창에 어떤 값이 출력될지 예상해보세요.
   아래 두 예시는 같은 값을 출력할까요?

2-1. 전위형 증가 연산자를 사용한 경우(`++i`):

```javascript
let i = 0;
while (++i < 5) alert(i);

답: 1 ~ 4까지 출력
i = 0, ++i = 1, (1 < 5), alert(1)
i = 1, ++i = 2, (2 < 5), alert(2)
i = 2, ++i = 3, (3 < 5), alert(3)
i = 3, ++i = 4, (4 < 5), alert(4)
i = 4, ++i = 5, (5 < 5) => 반복문 종료
```

2-2. 후위형 증가 연산자를 사용한 경우(`i++`):

```javascript
let i = 0;
while (i++ < 5) alert( i );

답: 1 ~ 5까지 출력
i = 0, i++ = 1, (0 < 5), alert(1)
i = 1, i++ = 2, (1 < 5), alert(2)
i = 2, i++ = 3, (2< 5), alert(3)
i = 3, i++ = 4, (3< 5), alert(4)
i = 4, i++ = 5, (4< 5), alert(5)
i = 5, i++ = 6, (5 < 5) => 반복문 종료
```

전위 증가 연산자를 적용하면 `++i`는 `i`를 먼저 증가시키고 새로운 값을 반환한다.

후위 증가 연산자를 적용하면 `i++`는 `i`를 증가시키긴 하지만 _기존값_ 을 반환한다. 그런데 `alert`문은 조건문과 별개의 문이므로 증가된 값이 출력된다.

---

3. for 반복문이 순차적으로 실행될 때마다 얼럿 창에 어떤 값이 출력될지 예상해보세요.
   아래 두 예시는 같은 값을 출력할까요?

3-1. 후위형 증가 연산자를 사용한 경우(`i++`):

```javascript
for (let i = 0; i < 5; i++) alert( i );

답: 0 ~ 4까지 출력
i = 0, (0 < 5), alert(0), i++ = 1
i = 1, (1 < 5), alert(1), i++ = 2
// ...
i = 4, (4 < 5), alert(4), i++ = 5
i = 5, (5 < 5) => 반복문 종료
```

3-2. 전위형 증가 연산자를 사용한 경우(`++i`):

```javascript
for (let i = 0; i < 5; ++i) alert( i );

답: 0 ~ 4까지 출력
i = 0, (0 < 5), alert(0), ++i = 1
// ...
i = 4, (4 < 5), alert(4), ++i = 5
i = 5, (5 < 5) => 반복문 종료
```

`for`문의 알고리즘은 다음과 같다.

1. `i`의 값을 확인 (`i = 0`이 기본값)
2. `i < 5` 조건을 만족하는지 확인
3. 위 조건이 `true`이면 반복문의 본문을 실행
4. `step` 실행 (`i++`, `++i`)
5. 다시 1로 돌아가 `i`의 값을 확인

따라서 `for`문에서는 `i++`과 `++i`의 차이가 없다

---

4. `for` 반복문을 이용하여 `2`부터 `10`까지 숫자 중 짝수만을 출력해보세요.

답:

```javascript
for (let i = 1; i < 6; i++) {
  alert(2 * i);
}

for (let i = 2; i <= 10; i++) {
  if (i % 2 == 0) alert(i);
}
```

---

5. `for` 반복문을 `while` 반복문으로 바꾸되, 동작 방식에는 변화가 없도록 해보세요. 출력 결과도 동일해야 합니다.

```javascript
for (let i = 0; i < 3; i++) {
  alert(`number ${i}!`);
}
```

답:

```javascript
let i = 0;
while (i < 3) {
  alert(`numbert ${i}!`);
  i++;
}
```

---

6. 사용자가 `100`보다 큰 숫자를 입력하도록 안내하는 프롬프트 창을 띄워보세요. 사용자가 조건에 맞지 않은 값을 입력한 경우 반복문을 사용해 동일한 프롬프트 창을 띄워줍시다.
   사용자가 `100`을 초과하는 숫자를 입력하거나 취소 버튼을 누른 경우, 혹은 아무것도 입력하지 않고 확인 버튼을 누른 경우엔 더는 프롬프트 창을 띄워주지 않아도 됩니다.

   사용자가 오직 숫자만 입력한다고 가정하고 답안을 작성하도록 해봅시다. 숫자가 아닌 값이 입력되는 예외 상황은 처리하지 않아도 됩니다.

답:

```javascript
let number;

do {
  num = prompt("100보다 큰 숫자를 입력", "");
} while (num <= 100 && num);
```

`num <= 100`: 100보다 작거나 같은 값을 입력한 경우 && `num` 값이 있을 때(빈문자열이나 `null`이 아닌 경우) => 두 경우 모두 `true`일 때 반복문 실행

참고: `num`이 `null`인 경우 `num <= 100`은 `true`가 된다.

---

7. [소수(prime number)](<https://ko.wikipedia.org/wiki/%EC%86%8C%EC%88%98_(%EC%88%98%EB%A1%A0)>)는 자신보다 작은 두 개의 자연수를 곱하여 만들 수 없는 1보다 큰 자연수입니다.

   다시 말해서 `1`과 `그 수 자신` 이외의 자연수로는 나눌 수 없는 자연수를 소수라고 부르죠.

   `5`는 `2`나 `3`, `4`로 나눌 수 없기 때문에 소수입니다. `5`를 이들 숫자로 나누면 나머지가 있기 때문이죠.

   **2부터 `n`까지의 숫자 중 소수만 출력해주는 코드를 작성해봅시다.**

   `n = 10`이라면 결과는 `2,3,5,7`이 되어야겠죠.

   주의: 작성한 코드는 임의의 숫자 `n`에 대해 동작해야 합니다.

```javascript
let n = prompt("2보다 큰 자연수 입력", "");
outer: for (let i = 2; i <= n; i++) {
  for (let j = 1; j <= n; j++) {
    if (!(i == j || j == 1) && i % j == 0) continue outer;
  }
  alert(i);
}

nextPrime: for (let i = 2; i <= n; i++) {
  for (let j = 2; j < i; j++) {
    if (i % j == 0) continue nextPrime;
  }
  alert(i);
}
```
